{% extends "admin/base_site.html" %}
{% load i18n %}

{% block title %}Cards | Django Admin{% endblock %}

{% block content %}
<h1>üÉè MTG Cards</h1>

<div class="module">
    <div class="row">
        <div class="col-md-6">
            <form method="get" class="form-inline">
                <input type="text" name="q" value="{{ search_query }}" placeholder="Search cards..." class="form-control">
                <button type="submit" class="btn btn-primary">Search</button>
            </form>
        </div>
        <div class="col-md-6 text-right">
            <p>Showing {{ showing_from }}-{{ showing_to }} of {{ total_cards }} cards</p>
        </div>
    </div>
</div>

<div class="module">
    <table class="table">
        <thead>
            <tr>
                <th>Name</th>
                <th>Mana Cost</th>
                <th>Type</th>
                <th>Colors</th>
                <th>Rarity</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for card in cards %}
            <tr>
                <td>
                    <strong>{{ card.name }}</strong>
                    {% if card.uuid %}
                        <br><small class="text-muted">{{ card.uuid|slice:":8" }}...</small>
                    {% endif %}
                </td>
                <td>
                    {% if card.manaCost %}
                        <code>{{ card.manaCost }}</code>
                    {% else %}
                        <span class="text-muted">‚Äî</span>
                    {% endif %}
                </td>
                <td>
                    {% if card.types %}
                        {{ card.types|join:" " }}
                    {% else %}
                        <span class="text-muted">‚Äî</span>
                    {% endif %}
                </td>
                <td>
                    {% if card.colors %}
                        <span class="badge badge-secondary">{{ card.colors|join:", " }}</span>
                    {% else %}
                        <span class="text-muted">Colorless</span>
                    {% endif %}
                </td>
                <td>
                    {% if card.rarity %}
                        <span class="badge 
                            {% if card.rarity == 'common' %}badge-secondary
                            {% elif card.rarity == 'uncommon' %}badge-success
                            {% elif card.rarity == 'rare' %}badge-warning
                            {% elif card.rarity == 'mythic' %}badge-danger
                            {% else %}badge-light{% endif %}">
                            {{ card.rarity|title }}
                        </span>
                    {% else %}
                        <span class="text-muted">‚Äî</span>
                    {% endif %}
                </td>                <td>
                    <a href="{% url 'admin-cards:card-detail' card.uuid %}" class="btn btn-sm btn-outline-primary">
                        View Details
                    </a>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="6" class="text-center text-muted">
                    {% if search_query %}
                        No cards found matching "{{ search_query }}"
                    {% else %}
                        No cards found. Try importing some cards first.
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<!-- Pagination -->
{% if has_previous or has_next %}
<div class="pagination">
    {% if has_previous %}
        <a href="?page={{ previous_page }}{% if search_query %}&q={{ search_query }}{% endif %}" class="btn btn-outline-secondary">
            ‚Üê Previous
        </a>
    {% endif %}
    
    <span class="mx-3">Page {{ page }}</span>
    
    {% if has_next %}
        <a href="?page={{ next_page }}{% if search_query %}&q={{ search_query }}{% endif %}" class="btn btn-outline-secondary">
            Next ‚Üí
        </a>
    {% endif %}
</div>
{% endif %}

<style>
.pagination {
    text-align: center;
    margin-top: 20px;
}
.badge {
    font-size: 0.8em;
}
</style>

{% endblock %}
